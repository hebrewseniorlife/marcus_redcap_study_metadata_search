<!-- Search Form -->
<div class="row">
    <div class="col-md-10">
        <form action="{{paths.search | raw}}" accept-charset="UTF-8" method="get" id="search-form">
            <div class="input-group">
                <input type="text" class="form-control" id="term" name="term" value="{{ search.term }}" placeholder="project, form, or field name...">
                <span class="input-group-btn ml-3">
                    <button type="submit" class="btn btn-primary">Search</button>

                    <div class="btn-group" role="group">
                        <button id="cartButtonGroup" type="button" 
                            class="btn btn-secondary dropdown-toggle" data-toggle="dropdown"><span id="cart-button-text">Cart ({{ cart.documents | length }})</span></button>
                        <div class="dropdown-menu" aria-labelledby="cartButtonGroup">
                            <a class="dropdown-item" href="#" id="view-cart-link"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-table" viewBox="0 0 16 16">
                                <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z"/>
                            </svg>&nbsp; View</a>                        
                            <a class="dropdown-item" href="{{ paths.api | raw }}&entity=cart&action=export" target="_new" id="export-cart-link"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
                                <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                                <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                            </svg>&nbsp; Data Dictionary (only)</a>
                            <a class="dropdown-item" href="{{ paths.api | raw }}&entity=cart&action=export&format=csv" target="_new" id="export-cart-csv-link"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
                                <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                                <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                            </svg>&nbsp; Full Cart (CSV)</a>   
                            <a class="dropdown-item" href="{{ paths.api | raw }}&entity=cart&action=export&format=json" target="_new" id="export-cart-csv-link"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
                                <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                                <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                            </svg>&nbsp; Full Cart (JSON)</a>                                                       
                        </div>
                    </div>
                </span>
            </div>
        </form>
    </div>
</div>

<script>
$(document).ready(function() {
    $('#search-form').submit(onSearchFormSubmit);

});

function onSearchFormSubmit(e){
    e.preventDefault();

    var form = $(this);
    var url = form.attr('action');
    var data = form.serialize();

    window.location = url + "&" + data;
}
</script>


